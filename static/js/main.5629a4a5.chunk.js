(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{34:function(e,t,a){e.exports=a.p+"static/media/logo.99cae02f.svg"},35:function(e,t,a){e.exports=a.p+"static/media/logo2.30142fd9.png"},40:function(e,t,a){e.exports=a(74)},72:function(e,t,a){e.exports=a.p+"static/media/logo-small.8a09fe18.svg"},73:function(e,t,a){},74:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(30),s=a.n(c),o=a(3),i=a(4),l=a(5),u=a(37),m=a(2),p=a(31),d=a.n(p),f=a(1),_=a.n(f),v=a(6),b=a(10),h=a.n(b),k=function e(t){var a=this;Object(o.a)(this,e),this.getSessionInfo=function(){var e=Object(v.a)(_.a.mark((function e(t){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.a.post(a.props.DBlink,{userId:t});case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.login=function(){var e=Object(v.a)(_.a.mark((function e(t){var n;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.a.post(a.props.DBlink+"/login/",t);case 2:return n=e.sent.data,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.audioURL=function(e){return a.props.DBlink+"/stream/"+e},this.nextChapter=function(e,t){return h.a.post(a.props.DBlink+"/next",{userId:e,currentChapter:t})},this.selectSide=function(){var e=Object(v.a)(_.a.mark((function e(t,n){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.a.post(a.props.DBlink+"/select-side/",{ticket:t,left:n});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),this.logout=function(){var e=Object(v.a)(_.a.mark((function e(t){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.a.post(a.props.DBlink+"/logout/",{userId:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.props=t,this.DBlink=t.DBlink,h.a.defaults.headers.post.Accept="*/*",h.a.defaults.headers.post["Content-Type"]="json",h.a.defaults.withCredentials=!0},E=r.a.createContext("new store()"),g=function(){var e=window.navigator.standalone,t=window.navigator.userAgent.toLowerCase(),a=/safari/.test(t);return/iphone|ipod|ipad/.test(t)?!e&&a?"browser":e&&!a?"standalone":e||a?void 0:"uiwebview":"not iOS"},w=function(e){return e.preventDefault()},y=function(e,t){e.addEventListener("wheel",w,{passive:!1}),!t&&e.addEventListener("touchmove",w,{passive:!1})},x=function(e,t){e.removeEventListener("wheel",w,{passive:!1}),!t&&e.removeEventListener("touchmove",w,{passive:!1})},N=function(e){Object(l.a)(a,e);var t=Object(i.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,c=new Array(n),s=0;s<n;s++)c[s]=arguments[s];return(e=t.call.apply(t,[this].concat(c))).state={},e.render=function(){return r.a.createElement("div",{className:"header"},r.a.createElement("div",{className:"container"},r.a.createElement("b",null,"Not to Scale"),r.a.createElement("button",{className:"header__exit",onClick:function(){return e.props.exit()}},"\u0432\u044b\u0439\u0442\u0438")))},e}return a}(r.a.Component),S=a(39),j=a(13),O=function(e){var t=function(t){Object(l.a)(n,t);var a=Object(i.a)(n);function n(){return Object(o.a)(this,n),a.apply(this,arguments)}return Object(j.a)(n,[{key:"render",value:function(){var t=this.props,a=t.forwardRef,n=Object(S.a)(t,["forwardRef"]);return r.a.createElement(e,Object.assign({},n,{ref:a}))}}]),n}(n.Component),a=Object(m.f)(t,{withRef:!0});return r.a.forwardRef((function(e,t){return r.a.createElement(a,Object.assign({},e,{forwardRef:t}))}))},R=function(e){Object(l.a)(a,e);var t=Object(i.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).focus=function(){return n.inputFieldRef.current&&n.inputFieldRef.current.focus()},n.blur=function(){return n.inputFieldRef.current&&n.inputFieldRef.current.blur()},n.onKeyDown=function(e){var t=""+n.props.value;n.props.number&&n.props.value&&t.match(/[^0-9]/g)&&n.props.onChange(t.replace(/[^0-9]/g,"")),n.props.onKeyDown&&n.props.onKeyDown(e)},n.onFocus=function(e){n.props.onFocus&&n.props.onFocus(e)},n.onBlur=function(e){n.props.onBlur&&n.props.onBlur(e)},n.render=function(){return r.a.createElement("div",{className:"form-group "+n.props.className+" "+(n.props.errorMessage&&"form-group--error")},r.a.createElement("input",{ref:n.inputFieldRef,type:n.props.password?"password":"text",className:"form-group__input ".concat(n.props.className),placeholder:n.props.placeholder,required:n.props.required,value:n.props.value,onChange:function(e){return n.props.onChange(e.target.value)},onFocus:n.onFocus,onBlur:n.onBlur,onKeyDown:n.onKeyDown,disabled:n.props.disabled}),n.props.label&&r.a.createElement("label",{className:"form-group__label"},n.props.label))},n.inputFieldRef=e.inputFieldRef||r.a.createRef(),n}return a}(n.Component),C=function(e){return e>9?e:"0".concat(e)},D=function(e){return"".concat(C(Math.floor(e/60)),":").concat(C(Math.floor(e%60)))},T=function(){return r.a.createElement("div",{className:"play-symbol"})},B=["5. \u0412\u043a\u043b\u044e\u0447\u0438\u0442\u0435 \u043d\u0430 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0435 \u0440\u0435\u0436\u0438\u043c \u043d\u0435 \u0431\u0435\u0441\u043f\u043e\u043a\u043e\u0438\u0442\u044c, \u043e\u0442\u043a\u043b\u044e\u0447\u0438\u0442\u0435 \u0443\u0432\u0435\u0434\u043e\u043c\u043b\u0435\u043d\u0438\u044f","4. \u0420\u0430\u0441\u0441\u043b\u0430\u0431\u044c\u0442\u0435\u0441\u044c","3. \u041c\u044b \u0443\u0436\u0435 \u0441\u043a\u043e\u0440\u043e \u043d\u0430\u0447\u043d\u0451\u043c","2. \u041f\u0440\u0438\u0433\u043e\u0442\u043e\u0432\u044c\u0442\u0435\u0441\u044c","1. \u0412\u0430\u043c \u043d\u0443\u0436\u043d\u043e \u043e\u0434\u043d\u043e\u0432\u0440\u0435\u043c\u0435\u043d\u043d\u043e \u043d\u0430 \u0434\u0432\u0443\u0445 \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u0430\u0445 \u043d\u0430\u0436\u0430\u0442\u044c \u043d\u0430 PLAY ","0. \u041c\u043e\u0436\u043d\u043e \u043d\u0430\u0436\u0438\u043c\u0430\u0442\u044c \u043d\u0430 PLAY "],L=[{name:"\u0432\u0441\u0442\u0443\u043f\u043b\u0435\u043d\u0438\u0435",time:0},{name:"\u0447\u0430\u0441\u0442\u044c 1",time:69},{name:"\u0447\u0430\u0441\u0442\u044c 2",time:400},{name:"\u0447\u0430\u0441\u0442\u044c 3",time:882},{name:"\u0447\u0430\u0441\u0442\u044c 4",time:1485},{name:"\u0447\u0430\u0441\u0442\u044c 5",time:2545},{name:"\u0447\u0430\u0441\u0442\u044c 6",time:3052}],I=function(e){Object(l.a)(a,e);var t=Object(i.a)(a);function a(e){var n;Object(o.a)(this,a),(n=t.call(this,e)).getSessionInfo=Object(v.a)(_.a.mark((function e(){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.setState({authorised:"real",secondUser:"real",ticket:"",canSelect:!0});case 1:case"end":return e.stop()}}),e)}))),n.logout=function(){window.localStorage.removeItem("left"),n.setState({phase:"start",left:void 0})},n.login=Object(v.a)(_.a.mark((function e(){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.setState({phase:"continue"});case 1:case"end":return e.stop()}}),e)}))),n.initializeAudio=function(){n.audio=new Audio,n.audio.addEventListener("canplay",(function(){return"can-restart"!==n.state.buttonStatus&&setTimeout((function(){n.setState({buttonStatus:"countdown",message:"".concat(D(n.state.chapters[n.state.currentChapter].time),"/").concat(D(n.audio.duration)),comment:n.state.texts[0]}),n.state.texts.slice(1).forEach((function(e,t){return setTimeout((function(){return n.setState({comment:e.split("PLAY").reduce((function(e,t){return r.a.createElement(r.a.Fragment,null,e,r.a.createElement(T,null),t)}))})}),1e3*(t+1))})),setTimeout((function(){return n.setState({buttonStatus:"can-play",buttonDisabled:!1})}),1e3*(n.state.texts.length-1))}),100)})),n.audio.addEventListener("ended",(function(){setTimeout((function(){n.setState({buttonStatus:"buy-another-ticket",comment:"\u0421\u043f\u0430\u0441\u0438\u0431\u043e \u0437\u0430 \u043f\u0440\u043e\u0441\u043c\u043e\u0442\u0440!"}),n.context.store.logout(n.state.userId),window.localStorage.removeItem("userId")}),5e3)})),n.audio.preload="auto",n.audio.src="https://storage.yandexcloud.net/cdn.tochkadostupa.spb.ru/the_sociophobic/not-to-scale/".concat(n.state.left?"L":"R",".mp3"),n.audio.load()},n.pressButton=function(){switch(n.state.buttonStatus){case"never-pressed":return n.initializeAudio(),void n.setState({buttonStatus:"buffering",message:"\u0411\u0443\u0444\u0435\u0440\u0438\u0437\u0430\u0446\u0438\u044f...",comment:"",buttonDisabled:!0});case"can-play":n.play()}},n.restart=function(){n.audio.pause(),n.audio.currentTime=0,n.play()},n.play=function(){n.setState({buttonStatus:"can-restart",buttonDisabled:!0,message:"".concat(D(n.audio.currentTime),"/").concat(D(n.audio.duration)),comment:r.a.createElement(r.a.Fragment,null,"\u0412\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u043f\u0435\u0440\u0435\u0437\u0430\u043f\u0443\u0441\u0442\u0438\u0442\u044c \u0441\u043f\u0435\u043a\u0442\u0430\u043a\u043b\u044c ",r.a.createElement("br",{className:"desktop-only"}),"\u0432 \u0442\u0435\u0447\u0435\u043d\u0438\u0438 \u043f\u0435\u0440\u0432\u044b\u0445 60\xa0\u0441\u0435\u043a\u0443\u043d\u0434")}),n.audio.addEventListener("timeupdate",(function(){n.audio.currentTime>60&&"can-restart"===n.state.buttonStatus&&n.setState({buttonStatus:"in-process",comment:""}),n.setState({message:"".concat(D(n.audio.currentTime),"/").concat(D(n.audio.duration))})})),n.audio.play()},n.buyAnotherTicket=function(){window.open("https://tochkadostupa.spb.ru/events/not_to_scale","_blank").focus()},n.selectSide=Object(v.a)(_.a.mark((function e(){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.setState({canSelect:void 0});case 1:case"end":return e.stop()}}),e)}))),n.renderLogin=function(){var e,t=n.state.authorised&&n.state.authorised.match(/outdated|many-devices|fake/gm);switch(n.state.authorised){case"outdated":e="\u0411\u0438\u043b\u0435\u0442 \u0441 \u0442\u0430\u043a\u0438\u043c \u043d\u043e\u043c\u0435\u0440\u043e\u043c \u0443\u0436\u0435 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d";break;case"many-devices":e="\u0411\u0438\u043b\u0435\u0442 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f \u043d\u0430 \u0431\u043e\u043b\u0435\u0435 \u0447\u0435\u043c 3\u0445 \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u0430\u0445";break;case"fake":e="\u0411\u0438\u043b\u0435\u0442\u0430 \u0441 \u0442\u0430\u043a\u0438\u043c \u043d\u043e\u043c\u0435\u0440\u043e\u043c \u043d\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442";break;default:e="\u041d\u0430\u0447\u0430\u0442\u044c"}return r.a.createElement("div",{className:"spekt__login"},r.a.createElement("div",{className:"spekt__login__desc"},r.a.createElement("b",null,"Not to Scale")," \u2014 \u044d\u0442\u043e \u0441\u043f\u0435\u043a\u0442\u0430\u043a\u043b\u044c \u042d\u043d\u0442\u0430 \u0425\u044d\u043c\u043f\u0442\u043e\u043d\u0430 \u0438 \u0422\u0438\u043c\u0430 \u042d\u0442\u0447\u0435\u043b\u0441\u0430. \u0412\u0430\u043c \u043f\u043e\u043d\u0430\u0434\u043e\u0431\u044f\u0442\u0441\u044f \u0434\u0432\u0435 \u043f\u0430\u0440\u044b \u043d\u0430\u0443\u0448\u043d\u0438\u043a\u043e\u0432, \u0434\u0432\u0430 \u043f\u0440\u043e\u0441\u0442\u044b\u0445 \u043a\u0430\u0440\u0430\u043d\u0434\u0430\u0448\u0430 (\u0438 \u043e\u0434\u0438\u043d \u043f\u0440\u043e \u0437\u0430\u043f\u0430\u0441), \u043f\u0430\u0440\u0430 \u043b\u0430\u0441\u0442\u0438\u043a\u043e\u0432 \u0438 9 \u043b\u0438\u0441\u0442\u043e\u0432 \u0431\u0435\u043b\u043e\u0439 \u0431\u0443\u043c\u0430\u0433\u0438 A4. \u0418 \u0432\u0442\u043e\u0440\u043e\u0439 \u0437\u0440\u0438\u0442\u0435\u043b\u044c, \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u043d\u0430\u0445\u043e\u0434\u0438\u0442\u0441\u044f \u0440\u044f\u0434\u043e\u043c \u0441 \u0432\u0430\u043c\u0438."),r.a.createElement("button",{className:"button button--main ".concat(t&&"button--main--danger"),onClick:function(){return n.login()}},e))},n.renderSelect=function(){return n.state.canSelect?r.a.createElement("div",{className:"spekt__select"},r.a.createElement("div",{className:"spekt__select__desc"},"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043c\u0435\u0441\u0442\u043e \u0437\u0430 \u0441\u0442\u043e\u043b\u043e\u043c","undefined"!==typeof n.state.left&&r.a.createElement("button",{className:"spekt__select__desc__button",onClick:function(){return n.selectSide()}},"\u043f\u0440\u043e\u0434\u043e\u043b\u0436\u0438\u0442\u044c")),r.a.createElement("div",{className:"spekt__select__picture"},r.a.createElement("div",{className:"spekt__select__picture__top"},r.a.createElement("div",{className:"spekt__select__picture__top__list"})),r.a.createElement("div",{className:"spekt__select__picture__bottom"},r.a.createElement("div",{className:"spekt__select__picture__bottom__left",onClick:function(){window.localStorage.setItem("left",!0),n.setState({left:!0})}},"\u0421\u043b\u0435\u0432\u0430",r.a.createElement("div",{className:"spekt__select__picture__bottom__left__list ".concat(!0===n.state.left&&"spekt__select__picture__bottom__left__list--selected")})),r.a.createElement("div",{className:"spekt__select__picture__bottom__right",onClick:function(){window.localStorage.setItem("left",!1),n.setState({left:!1})}},"\u0421\u043f\u0440\u0430\u0432\u0430",r.a.createElement("div",{className:"spekt__select__picture__bottom__right__list ".concat(!1===n.state.left&&"spekt__select__picture__bottom__right__list--selected")}))))):r.a.createElement("div",{className:"spekt__select"},r.a.createElement("div",{className:"spekt__select__wait"},"\u0414\u043e\u0436\u0434\u0438\u0442\u0435\u0441\u044c, \u043f\u043e\u043a\u0430 \u0432\u0442\u043e\u0440\u043e\u0439 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u0432\u044b\u0431\u0435\u0440\u0435\u0442 \u043c\u0435\u0441\u0442\u043e \u0438 \u043d\u0430\u0436\u043c\u0438\u0442\u0435",r.a.createElement("button",{className:"spekt__select__wait__button",onClick:Object(v.a)(_.a.mark((function e(){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"undefined"===typeof n.state.left&&(n.setState({didNotSelectAlert:!0}),setTimeout((function(){return n.setState({didNotSelectAlert:!1})}),4e3));case 1:case"end":return e.stop()}}),e)})))},"\u043f\u0440\u043e\u0434\u043e\u043b\u0436\u0438\u0442\u044c"),n.state.didNotSelectAlert&&"\u0432\u0442\u043e\u0440\u043e\u0439 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u0435\u0449\u0451 \u043d\u0435 \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0438\u043b\u0441\u044f, \u043c\u043e\u0436\u0435\u0442\u0435 \u0435\u0433\u043e \u043f\u043e\u0442\u043e\u0440\u043e\u043f\u0438\u0442\u044c!"))},n.renderSpekt=function(){return r.a.createElement("div",{className:"spekt__spekt"},r.a.createElement("div",{className:"spekt__spekt__instructions"},"\u0414\u043b\u044f \u0443\u0447\u0430\u0441\u0442\u0438\u044f \u0432 \u0441\u043f\u0435\u043a\u0442\u0430\u043a\u043b\u0435 \u0412\u0430\u043c ",r.a.createElement("b",null,"\u043f\u043e\u043d\u0430\u0434\u043e\u0431\u044f\u0442\u0441\u044f"),":",r.a.createElement("br",null),"1. \u0414\u0440\u0443\u0433\u043e\u0439 \u0447\u0435\u043b\u043e\u0432\u0435\u043a \u2014 \u0412\u0430\u0448 \u043f\u0430\u0440\u0442\u043d\u0435\u0440, \u043d\u0430\u0445\u043e\u0434\u044f\u0449\u0438\u0439\u0441\u044f \u0440\u044f\u0434\u043e\u043c \u0441 \u0412\u0430\u043c\u0438",r.a.createElement("br",null),"2. \u0414\u0432\u0430 \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u0430 \u0434\u043b\u044f \u0437\u0430\u043f\u0443\u0441\u043a\u0430 \u0437\u0432\u0443\u043a\u0430 (\u043d\u043e\u0443\u0442\u0431\u0443\u043a, \u043f\u043b\u0430\u043d\u0448\u0435\u0442, \u0441\u043c\u0430\u0440\u0442\u0444\u043e\u043d)",r.a.createElement("br",null),"3. \u0414\u0432\u0435 \u043f\u0430\u0440\u044b \u043d\u0430\u0443\u0448\u043d\u0438\u043a\u043e\u0432 (\u0434\u043b\u044f \u0412\u0430\u0441 \u0438 \u0412\u0430\u0448\u0435\u0433\u043e \u043f\u0430\u0440\u0442\u043d\u0435\u0440\u0430)",r.a.createElement("br",null),"4. \u041f\u043b\u043e\u0441\u043a\u0430\u044f \u043f\u043e\u0432\u0435\u0440\u0445\u043d\u043e\u0441\u0442\u044c, \u043d\u0430 \u043a\u043e\u0442\u043e\u0440\u043e\u0439 \u043c\u043e\u0436\u043d\u043e \u0440\u0438\u0441\u043e\u0432\u0430\u0442\u044c (\u0441\u0442\u043e\u043b) \u2014 \u043f\u043e\u0432\u0435\u0440\u0445\u043d\u043e\u0441\u0442\u044c \u0434\u043e\u043b\u0436\u043d\u0430 \u0431\u044b\u0442\u044c \u0431\u043e\u043b\u044c\u0448\u0430\u044f, \u0447\u0442\u043e\u0431\u044b \u043d\u0430 \u043d\u0435\u0439 \u043f\u043e\u043c\u0435\u0449\u0430\u043b\u0438\u0441\u044c \u0447\u0435\u0442\u044b\u0440\u0435 \u043b\u0438\u0441\u0442\u0430 \u0444\u043e\u0440\u043c\u0430\u0442\u0430 \u04104",r.a.createElement("br",null),"5. \u0414\u0435\u0432\u044f\u0442\u044c \u043b\u0438\u0441\u0442\u043e\u0432 \u0431\u0435\u043b\u043e\u0439 \u0431\u0443\u043c\u0430\u0433\u0438 \u0444\u043e\u0440\u043c\u0430\u0442\u0430 \u04104",r.a.createElement("br",null),"6. \u0414\u0432\u0430 \u0437\u0430\u0442\u043e\u0447\u0435\u043d\u043d\u044b\u0445 \u043f\u0440\u043e\u0441\u0442\u044b\u0445 \u043a\u0430\u0440\u0430\u043d\u0434\u0430\u0448\u0430 + \u043e\u0434\u0438\u043d \u0437\u0430\u043f\u0430\u0441\u043d\u043e\u0439",r.a.createElement("br",null),"7. \u0414\u0432\u0430 \u043b\u0430\u0441\u0442\u0438\u043a\u0430",r.a.createElement("br",null),r.a.createElement("br",null),"\u0414\u0430\u043b\u044c\u0448\u0435\u2026",r.a.createElement("br",null),r.a.createElement("br",null),"\u0421\u044f\u0434\u044c\u0442\u0435 ",n.state.left?r.a.createElement("b",null,"\u0441\u043b\u0435\u0432\u0430"):r.a.createElement("b",null,"\u0441\u043f\u0440\u0430\u0432\u0430")," \u043e\u0442 \u0434\u0440\u0443\u0433\u043e\u0433\u043e \u0443\u0447\u0430\u0441\u0442\u043d\u0438\u043a\u0430 \u043f\u0435\u0440\u0435\u0434 \u043f\u043e\u0432\u0435\u0440\u0445\u043d\u043e\u0441\u0442\u044c\u044e, \u043d\u0430 \u043a\u043e\u0442\u043e\u0440\u043e\u0439 \u0431\u0443\u0434\u0435\u0442\u0435 \u0440\u0438\u0441\u043e\u0432\u0430\u0442\u044c. \u0412\u043a\u043b\u044e\u0447\u0438\u0442\u0435 \u043d\u0430 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0435 \u0440\u0435\u0436\u0438\u043c \xab\u043d\u0435 \u0431\u0435\u0441\u043f\u043e\u043a\u043e\u0438\u0442\u044c\xbb. \u0423\u0434\u043e\u0441\u0442\u043e\u0432\u0435\u0440\u044c\u0442\u0435\u0441\u044c, \u0447\u0442\u043e \u0440\u0435\u0436\u0438\u043c \u044d\u043a\u043e\u043d\u043e\u043c\u0438\u0438 \u044d\u043d\u0435\u0440\u0433\u0438\u0438 \u0432\u044b\u043a\u043b\u044e\u0447\u0435\u043d \u0438 \u044d\u043a\u0440\u0430\u043d \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u0430 \u043d\u0435 \u043f\u043e\u0433\u0430\u0441\u043d\u0435\u0442. \u041d\u0430\u0434\u0435\u043d\u044c\u0442\u0435 \u043d\u0430\u0443\u0448\u043d\u0438\u043a\u0438. \u041f\u043e\u043b\u043e\u0436\u0438\u0442\u0435 \u043f\u0435\u0440\u0435\u0434 \u0441\u043e\u0431\u043e\u0439 \u043f\u043e \u043b\u0438\u0441\u0442\u0443 \u0431\u0443\u043c\u0430\u0433\u0438 \u0432\u0435\u0440\u0442\u0438\u043a\u0430\u043b\u044c\u043d\u043e, \u0432 \u043a\u043d\u0438\u0436\u043d\u043e\u0439 \u043e\u0440\u0438\u0435\u043d\u0442\u0430\u0446\u0438\u0438. \u041e\u0441\u0442\u0430\u043b\u044c\u043d\u044b\u0435 \u043b\u0438\u0441\u0442\u044b \u0431\u0443\u043c\u0430\u0433\u0438 \u043f\u043e\u043b\u043e\u0436\u0438\u0442\u0435 \u0432 \u0441\u0442\u043e\u043f\u043a\u0443.",r.a.createElement("br",null),r.a.createElement("br",null),"1. \u041d\u0430\u0436\u043c\u0438\u0442\u0435 \u043a\u043d\u043e\u043f\u043a\u0443 ",r.a.createElement(T,null)," \u043e\u0434\u043d\u043e\u0432\u0440\u0435\u043c\u0435\u043d\u043d\u043e \u0441\u043e \u0432\u0442\u043e\u0440\u044b\u043c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435\u043c.",r.a.createElement("br",null),"2. \u041f\u043e\u0441\u043b\u0435 \u043d\u0430\u0436\u0430\u0442\u0438\u044f \u043d\u0430\u0447\u043d\u0451\u0442\u0441\u044f \u043e\u0431\u0440\u0430\u0442\u043d\u044b\u0439 \u043e\u0442\u0441\u0447\u0451\u0442, \u0432\u0430\u043c \u043d\u0443\u0436\u043d\u043e \u043d\u0430\u0436\u0430\u0442\u044c \u0432\u0442\u043e\u0440\u043e\u0439 \u0440\u0430\u0437 \u043d\u0430 ",r.a.createElement(T,null)," \u043c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u043e \u043e\u0434\u043d\u043e\u0432\u0440\u0435\u043c\u0435\u043d\u043d\u043e"),r.a.createElement("div",{className:"spekt__spekt__player"},r.a.createElement("div",{className:"spekt__spekt__player__button-area"},r.a.createElement("button",{className:"spekt__spekt__player__button",onClick:function(){return n.pressButton()},disabled:n.state.buttonDisabled})),r.a.createElement("div",{className:"spekt__spekt__player__text"},n.state.message),r.a.createElement("div",{className:"spekt__spekt__player__comment"},"can-restart"===n.state.buttonStatus&&r.a.createElement("button",{className:"spekt__spekt__player__comment__restart",onClick:function(){return n.restart()}},"\u043f\u0435\u0440\u0435\u0437\u0430\u043f\u0443\u0441\u0442\u0438\u0442\u044c"),r.a.createElement("div",{className:"spekt__spekt__player__comment__text"},n.state.comment))))},n.render=function(){return r.a.createElement(r.a.Fragment,null,"undefined"!==typeof n.state.left&&r.a.createElement(N,{exit:n.logout}),r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"spekt"},"start"===n.state.phase?n.renderLogin():"undefined"===typeof n.state.left?n.renderSelect():n.renderSpekt())))};var c=window.localStorage.getItem("left"),s="true"===c||"false"!==c&&void 0;return n.state={texts:B,chapters:L,phase:"undefined"===typeof s?"start":"continue",ticket:"",authorised:"real",userId:"",secondUser:"real",buttonStatus:"never-pressed",currentChapter:0,message:"00:00",comment:r.a.createElement(r.a.Fragment,null,"\u041d\u0430\u0436\u043c\u0438\u0442\u0435 ",r.a.createElement(T,null)," \u0447\u0442\u043e\u0431\u044b \u0437\u0430\u043f\u0443\u0441\u0442\u0438\u0442\u044c",r.a.createElement("br",null),"\u0431\u0443\u0444\u0435\u0440\u0438\u0437\u0430\u0446\u0438\u044e"),left:"boolean"===typeof s?s:void 0,canSelect:!0},n}return a}(n.Component);I.contextType=E;var A=O(I),F=a(38),P=a(76),M=a(33),z=a.n(M),W=a(11),K=a.n(W),U=function(e){return Object.entries(e).map((function(e){return e.map(encodeURIComponent).join("=")})).join("&")},Y=function(e){Object(l.a)(a,e);var t=Object(i.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).loadData=Object(v.a)(_.a.mark((function e(){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=n,e.next=3,K()("".concat(n.context.store.DBlink.replace("not-to-scale/",""),"/nottoscaleticket?limit=5000"));case 3:return e.next=5,e.sent.json();case 5:return e.t1=e.sent,e.next=8,K()("".concat(n.context.store.DBlink.replace("not-to-scale/",""),"/nottoscaleuser?limit=5000"));case 8:return e.next=10,e.sent.json();case 10:e.t2=e.sent,e.t3={data:e.t1,users:e.t2},e.t0.setState.call(e.t0,e.t3);case 13:case"end":return e.stop()}}),e)}))),n.deleteData=Object(v.a)(_.a.mark((function e(){var t,a;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.loadData();case 2:t=n.state.data,e.t0=_.a.keys(t);case 4:if((e.t1=e.t0()).done){e.next=19;break}return a=e.t1.value,e.t2=console,e.t3="destroyed ",e.t4=JSON,e.next=11,K()("".concat(n.context.store.DBlink.replace("not-to-scale/",""),"/nottoscaleticket/destroy/")+t[a].id);case 11:return e.next=13,e.sent.json();case 13:e.t5=e.sent,e.t6=e.t4.stringify.call(e.t4,e.t5),e.t7=e.t3.concat.call(e.t3,e.t6),e.t2.log.call(e.t2,e.t7),e.next=4;break;case 19:case"end":return e.stop()}}),e)}))),n.addData=function(){var e=Object(v.a)(_.a.mark((function e(t){var a;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.deleteData();case 2:e.t0=_.a.keys(t);case 3:if((e.t1=e.t0()).done){e.next=14;break}return a=e.t1.value,e.t2=console,e.next=8,K()("".concat(n.context.store.DBlink.replace("not-to-scale/",""),"/nottoscaleticket/create?")+U({number:t[a][0]}));case 8:return e.next=10,e.sent.json();case 10:e.t3=e.sent,e.t2.log.call(e.t2,e.t3),e.next=3;break;case 14:return e.next=16,n.loadData();case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.restore=function(){var e=Object(v.a)(_.a.mark((function e(t){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),e.next=3,K()("".concat(n.context.store.DBlink.replace("not-to-scale/",""),"/nottoscaleticket/destroy/").concat(t.id));case 3:return e.next=5,K()("".concat(n.context.store.DBlink.replace("not-to-scale/",""),"/nottoscaleticket/create?").concat(U({number:t.number})));case 5:return e.next=7,n.loadData();case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.componentDidMount=function(){return n.loadData()},n.state={data:[],password:"",loggedIn:!1,file:void 0},n}return Object(j.a)(a,[{key:"render",value:function(){var e=this,t=this.state,a=t.password,n=t.loggedIn,c=t.data;return n?r.a.createElement("div",{className:"admin"},r.a.createElement("div",{className:"admin__file"},r.a.createElement("div",{className:"container"},"\u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0430 .CSV \u0444\u0430\u0439\u043b\u0430 (\u0432\u0441\u0435 \u0434\u0430\u043d\u043d\u044b\u0435 \u0431\u0443\u0434\u0443\u0442 \u043f\u0435\u0440\u0435\u0437\u0430\u043f\u0438\u0441\u0430\u043d\u044b)",r.a.createElement(z.a,{onFileLoaded:function(t,a){return e.addData(t)}}))),r.a.createElement("div",{className:"admin__tickets"},r.a.createElement("div",{className:"container"},c.map((function(t){return Object(F.a)({},t,{user0:t.user0&&e.state.users.find((function(e){return e.id===t.user0})),user1:t.user1&&e.state.users.find((function(e){return e.id===t.user1}))})})).map((function(t,a){return r.a.createElement("div",{key:t.id,className:"admin__tickets__item"},r.a.createElement("div",{className:"admin__tickets__item__index"},a+1,"."),r.a.createElement("div",{className:"admin__tickets__item__number"},t.number),r.a.createElement("div",{className:"admin__tickets__item__used"},t.user0&&t.user1?t.used?"\u0437\u0430\u043a\u043e\u043d\u0447\u0438\u043b":"\u0432 \u043f\u0440\u043e\u0446\u0435\u0441\u0441\u0435":"--"),r.a.createElement("div",{className:"admin__tickets__item__user--0"},t.user0?"\u0432\u043e\u0448\u0451\u043b ".concat(Object(P.a)(new Date(t.user0.logged),"dd/mm/yyyy").replace("2020-","").replace("07-","")):"--"),r.a.createElement("div",{className:"admin__tickets__item__user--1"},t.user1?"\u0432\u043e\u0448\u0451\u043b ".concat(Object(P.a)(new Date(t.user1.logged),"dd/mm/yyyy").replace("2020-","").replace("07-","")):"--"),r.a.createElement("div",{className:"admin__tickets__item__restore",onClick:function(){return e.restore(t)}},"\u041e\u0431\u043d\u0443\u043b\u0438\u0442\u044c"))}))))):r.a.createElement("div",{className:"admin"},r.a.createElement("div",{className:"container"},r.a.createElement(R,{value:a,onChange:function(t){return e.setState({password:t,loggedIn:"aNg2R4V5"===t})},placeholder:"\u043f\u0430\u0440\u043e\u043b\u044c"})))}}]),a}(r.a.Component);Y.contextType=E;var J=O(Y),q=function(e){return r.a.createElement("a",{className:e.className,href:e.to,target:e.newTab?"_blank":"",rel:"noopener noreferrer"},e.children)},V=a(34),X=a.n(V),H=a(35),$=a.n(H),G=(a(72),function(e){Object(l.a)(a,e);var t=Object(i.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,c=new Array(n),s=0;s<n;s++)c[s]=arguments[s];return(e=t.call.apply(t,[this].concat(c))).state={},e.render=function(){return r.a.createElement("div",{className:"footer",ref:e.props.elemRef},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"footer__logo"},r.a.createElement(q,{newTab:!0,to:"https://tochkadostupa.spb.ru"},r.a.createElement("img",{src:X.a}),r.a.createElement("img",{className:"",src:$.a}))),r.a.createElement("div",{className:"footer__links"},r.a.createElement(q,{newTab:!0,to:"https://vdnh.ru/events/spektakl-instruktsiya-not-to-scale/"},"\u043e \u043f\u0440\u043e\u0435\u043a\u0442\u0435"))))},e}return a}(n.Component)),Q=a(36),Z=function(e){Object(l.a)(a,e);var t=Object(i.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).componentDidMount=function(){n.resizeObserver=new Q.a((function(){return n.resize()})).observe(n.canvasRef.current),n.resize()},n.resize=function(){var e=n.getCtx();e&&(e.canvas.width=n.canvasRef.current.clientWidth,e.canvas.height=n.canvasRef.current.clientHeight)},n.getCtx=function(){return n.canvasRef.current&&n.canvasRef.current.getContext("2d")},n.setPos=function(e){return n.pos={x:e.clientX,y:e.clientY}},n.setPosTouch=function(e){var t=e.changedTouches&&e.changedTouches[0];t&&(n.pos={x:t.pageX,y:t.pageY})},n.draw=function(e){var t=n.getCtx();t&&"undefined"!==typeof n.pos.x&&1===e.buttons&&(t.beginPath(),t.lineWidth=2.5,t.lineCap="round",t.strokeStyle="#ee0200",t.moveTo(n.pos.x,n.pos.y),n.setPos(e),t.lineTo(n.pos.x,n.pos.y),t.stroke())},n.drawTouch=function(e){var t=n.getCtx();t&&"undefined"!==typeof n.pos.x&&n.pressed&&(t.beginPath(),t.lineWidth=2.5,t.lineCap="round",t.strokeStyle="#ee0200",t.moveTo(n.pos.x,n.pos.y),n.setPosTouch(e),t.lineTo(n.pos.x,n.pos.y),t.stroke())},n.render=function(){return r.a.createElement("div",{className:"canvas",ref:n.props.elemRef},r.a.createElement("canvas",{ref:n.canvasRef}))},n.pos={x:void 0,y:void 0},n.pressed=!1,n.canvasRef=r.a.createRef(),function(){try{return document.createEvent("TouchEvent"),!0}catch(e){return!1}}()||(document.addEventListener("mousemove",(function(e){return n.draw(e)})),document.addEventListener("mousedown",(function(e){return n.setPos(e)})),document.addEventListener("mouseenter",(function(e){return n.setPos(e)}))),n}return a}(n.Component),ee=function(e){Object(l.a)(a,e);var t=Object(i.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,c=new Array(n),s=0;s<n;s++)c[s]=arguments[s];return(e=t.call.apply(t,[this].concat(c))).state={},e.render=function(){var e=[r.a.createElement("a",{href:"safari://the-sociophobic.github.io/not-to-scale",target:"_blank"},"Safari"),r.a.createElement("a",{href:"googlechrome://the-sociophobic.github.io/not-to-scale",target:"_blank"},"Chrome")],t="not iOS"===g()?e[1]:e[0],a="not iOS"===g()?e[0]:e[1];return r.a.createElement("div",{className:"open-browser"},r.a.createElement("div",{className:"open-browser__text"},"\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u043e\u0442\u043a\u0440\u043e\u0439\u0442\u0435 \u0441\u0430\u0439\u0442",r.a.createElement("br",null),"\u0432 ",t," \u0438\u043b\u0438 ",a))},e}return a}(r.a.Component),te=(a(73),function(e){Object(l.a)(a,e);var t=Object(i.a)(a);function a(e){var n,c;return Object(o.a)(this,a),(n=t.call(this,e)).componentDidMount=function(){y(n.footerRef.current),y(n.canvasRef.current)},n.componentWillUnmount=function(){x(n.footerRef.current),x(n.canvasRef.current)},n.render=function(){return r.a.createElement(u.a,null,r.a.createElement(E.Provider,{value:n.state},r.a.createElement(d.a,null,r.a.createElement(Z,{elemRef:n.canvasRef}),r.a.createElement("div",{className:"App",ref:n.appRef},"uiwebview"===g()?r.a.createElement(ee,null):r.a.createElement("div",{className:"content"},r.a.createElement(m.c,null,r.a.createElement(m.a,{exact:!0,path:"/"},r.a.createElement(A,null)),r.a.createElement(m.a,{path:"/admin"},r.a.createElement(J,null)))),r.a.createElement(G,{elemRef:n.footerRef})))))},n.state=(c={state:n.state,setState:n.setState},{store:new k({stateRefs:c,DBlink:"https://tochkadostupa.spb.ru/not-to-scale/api"})}),n.appRef=r.a.createRef(),n.footerRef=r.a.createRef(),n.canvasRef=r.a.createRef(),n}return a}(n.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(te,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[40,1,2]]]);
//# sourceMappingURL=main.5629a4a5.chunk.js.map